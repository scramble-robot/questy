<?xml version="1.0"?>
<launch>
  <!-- Launch arguments -->
  <arg name="use_sim_time" 
       default="false" 
       description="Use simulation time" />
  <arg name="joy_device" 
       default="/dev/input/js0" 
       description="Joystick device path" />
  <arg name="gpio_config" 
       default="$(find-pkg-share gpio_reader)/config/gpio_reader.yaml" 
       description="GPIO reader configuration file" />
  <arg name="joy_config" 
       default="$(find-pkg-share joy_controller)/config/joy_controller_params.yaml" 
       description="Joy controller configuration file" />

  <!-- Include GPIO reader launch -->
  <include file="$(find-pkg-share gpio_reader)/launch/gpio_reader.launch.xml">
    <arg name="config_file" value="$(var gpio_config)" />
    <arg name="use_sim_time" value="$(var use_sim_time)" />
  </include>

  <!-- Include joy controller launch -->
  <include file="$(find-pkg-share joy_controller)/launch/joy_controller.launch.xml">
    <arg name="config_file" value="$(var joy_config)" />
    <arg name="joy_device" value="$(var joy_device)" />
    <arg name="use_sim_time" value="$(var use_sim_time)" />
  </include>

  <!-- Joy Gate Node -->
  <node pkg="joy_gate" 
        exec="joy_gate_node" 
        name="joy_gate" 
        output="screen">
    <param name="use_sim_time" value="$(var use_sim_time)" />
  </node>
</launch>